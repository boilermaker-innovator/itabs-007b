
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iTabs Generator</title>
    <style>
        :root {
            --primary-color: #6366f1;
            --primary-dark: #4338ca;
            --bg-light: #f4f7f9;
            --text-dark: #333;
            --border-color: #e2e8f0;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
        }
        
        body {
            background-color: var(--bg-light);
            color: var(--text-dark);
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        header {
            text-align: center;
            padding: 20px 0;
        }
        
        h1 {
            font-size: 32px;
            color: var(--primary-dark);
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 18px;
            color: #666;
        }
        
        .main-content {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .form-section, .preview-section {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            flex: 1;
            min-width: 300px;
        }
        
        .form-section {
            flex: 1;
        }
        
        .preview-section {
            flex: 1;
        }
        
        h2 {
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--border-color);
            color: var(--primary-dark);
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        input[type="text"], input[type="url"], textarea, select {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 16px;
        }
        
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .hint {
            font-size: 14px;
            color: #666;
            margin-top: 5px;
        }
        
        .color-picker {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .color-option {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
        }
        
        .color-option.active {
            border-color: var(--text-dark);
        }
        
        .tab-inputs {
            margin-bottom: 20px;
        }
        
        .tab-input {
            background: #f8fafc;
            border-radius: 5px;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .action-buttons {
            margin-top: 20px;
            display: flex;
            gap: 10px;
        }
        
        button {
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            background: var(--primary-color);
            color: white;
            font-weight: 600;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.2s ease;
        }
        
        button:hover {
            background: var(--primary-dark);
        }
        
        .add-tab-btn {
            background: #34a853;
        }
        
        .add-tab-btn:hover {
            background: #2d8a46;
        }
        
        .update-button {
            background: #6366f1;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 20px;
            width: 100%;
            transition: background-color 0.3s;
            margin-bottom: 10px;
        }
        
        .update-button:hover {
            background: #4338ca;
        }
        
        .update-images-button {
            background: #3b82f6;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: background-color 0.3s;
        }
        
        .update-images-button:hover {
            background: #2563eb;
        }
        
        .generate-code-button {
            background: #8b5cf6;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
            transition: background-color 0.3s;
        }
        
        .generate-code-button:hover {
            background: #7c3aed;
        }
        
        .code-output-container {
            display: none;
            margin-top: 20px;
            padding: 20px;
            background: #f8fafc;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
        }
        
        .code-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #4338ca;
        }
        
        .code-area {
            position: relative;
            margin-bottom: 15px;
        }
        
        .code-display {
            width: 100%;
            min-height: 200px;
            max-height: 400px;
            padding: 15px;
            background: #1e293b;
            color: #e2e8f0;
            border-radius: 6px;
            font-family: monospace;
            white-space: pre-wrap;
            overflow-y: auto;
            font-size: 14px;
            line-height: 1.5;
        }
        
        .copy-code-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 6px 12px;
            font-size: 14px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .copy-code-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .installation-guide {
            margin-top: 15px;
            background: #ffffff;
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid #8b5cf6;
        }
        
        .installation-guide h3 {
            font-size: 16px;
            margin-bottom: 10px;
            color: #4338ca;
        }
        
        /* iTabs Preview Styles */
        .preview-container {
            margin-top: 20px;
            border: 3px solid var(--primary-color);
            border-radius: 8px;
            overflow: hidden;
            position: relative;
        }
        
        .trigger-icon {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
            z-index: 10;
            font-style: italic;
        }
        
        .itabs-container {
            background: white;
        }
        
        .itabs-tabs {
            display: flex;
            background-color: #f1f5f9;
            border-bottom: 1px solid var(--border-color);
        }
        
        .itab {
            padding: 15px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            font-weight: 600;
            color: #64748b;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .itab:hover {
            color: var(--primary-color);
        }
        
        .itab.active {
            color: var(--primary-color);
            background: white;
            border-bottom: 3px solid var(--primary-color);
        }
        
        .itab-content {
            display: none;
            padding: 20px;
            animation: fadeIn 0.5s;
        }
        
        .itab-content.active {
            display: block;
        }
        
        .tab-image {
            max-width: 100%;
            height: auto;
            margin: 15px 0;
            border-radius: 4px;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .itabs-link-button {
            display: inline-block;
            margin-top: 15px;
            padding: 8px 16px;
            background: var(--primary-color);
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-weight: 600;
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>iTabs Generator</h1>
            <p class="subtitle">Create interactive, tabbed content that enhances user experience without disrupting flow</p>
        </header>
        
        <div class="main-content">
            <section class="form-section">
                <h2>Create Your iTabs</h2>
                
                <div class="input-group">
                    <label for="triggerIcon">Trigger Icon</label>
                    <input type="text" id="triggerIcon" value="i" placeholder="Enter trigger icon (e.g., i, ?, ℹ️)">
                    <p class="hint">This is the icon that users will click to open your iTabs</p>
                </div>
                
                <div class="tab-inputs" id="tabInputs">
                    <!-- Tab 1 -->
                    <div class="tab-input">
                        <div class="input-group">
                            <label for="tab1Title">Tab 1 Title</label>
                            <input type="text" id="tab1Title" value="What are iTabs?" placeholder="Enter tab title...">
                        </div>
                        <div class="input-group">
                            <label for="tab1Content">Tab 1 Content</label>
                            <textarea id="tab1Content" placeholder="Enter tab content...">iTabs are interactive information displays that enhance your content with contextual explanations. They help readers understand complex information without leaving the page or disrupting their reading flow.</textarea>
                        </div>
                        <div class="input-group">
                            <label for="tab1Image">Tab 1 Image URL (optional)</label>
                            <input type="url" id="tab1Image" placeholder="Enter image URL..." value="https://via.placeholder.com/600x300">
                            <p class="hint">Sample image URL: https://via.placeholder.com/600x300</p>
                            <p class="hint">If you paste a URL and it doesn't appear, click the "Update Images Only" button below</p>
                        </div>
                    </div>
                    
                    <!-- Tab 2 -->
                    <div class="tab-input">
                        <div class="input-group">
                            <label for="tab2Title">Tab 2 Title</label>
                            <input type="text" id="tab2Title" value="Benefits" placeholder="Enter tab title...">
                        </div>
                        <div class="input-group">
                            <label for="tab2Content">Tab 2 Content</label>
                            <textarea id="tab2Content" placeholder="Enter tab content...">• Immediate clarification of unfamiliar terms
• Maintains reading context and flow
• Reduces cognitive load of switching between pages
• Improves overall comprehension
• Enhances user engagement with your content</textarea>
                        </div>
                        <div class="input-group">
                            <label for="tab2Image">Tab 2 Image URL (optional)</label>
                            <input type="url" id="tab2Image" placeholder="Enter image URL..." value="https://via.placeholder.com/600x300/6366f1/ffffff?text=Benefits+of+iTabs">
                            <p class="hint">Images will appear below the text content in each tab</p>
                            <p class="hint">Try pasting a new URL and clicking "Update Images Only" if it doesn't update automatically</p>
                        </div>
                    </div>
                    
                    <!-- Tab 3 will be added dynamically -->
                </div>
                
                <button id="addTabBtn" class="add-tab-btn">+ Add Another Tab</button>
                
                <div class="input-group">
                    <label for="buttonText">Button Text (optional)</label>
                    <input type="text" id="buttonText" value="Learn More" placeholder="Enter button text...">
                </div>
                
                <div class="input-group">
                    <label for="buttonUrl">Button URL (optional)</label>
                    <input type="url" id="buttonUrl" value="#" placeholder="Enter URL...">
                </div>
                
                <div class="input-group">
                    <label>Primary Color</label>
                    <div class="color-picker">
                        <div class="color-option active" style="background-color: #6366f1;" data-color="#6366f1"></div>
                        <div class="color-option" style="background-color: #3b82f6;" data-color="#3b82f6"></div>
                        <div class="color-option" style="background-color: #10b981;" data-color="#10b981"></div>
                        <div class="color-option" style="background-color: #ef4444;" data-color="#ef4444"></div>
                        <div class="color-option" style="background-color: #8b5cf6;" data-color="#8b5cf6"></div>
                    </div>
                </div>
                
                <div class="input-group">
                    <label>Border Style</label>
                    <select id="borderStyle">
                        <option value="solid">Solid</option>
                        <option value="dashed">Dashed</option>
                        <option value="dotted">Dotted</option>
                        <option value="double">Double</option>
                        <option value="none">None</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label>Border Width</label>
                    <select id="borderWidth">
                        <option value="1px">Thin (1px)</option>
                        <option value="2px">Medium (2px)</option>
                        <option value="3px" selected>Thick (3px)</option>
                        <option value="4px">Extra Thick (4px)</option>
                    </select>
                </div>
                
                <div class="action-buttons">
                    <button id="updatePreviewBtn" class="update-button">Update Preview</button>
                    <button id="updateImagesBtn" class="update-images-button">Update Images Only</button>
                    <button id="generateCodeBtn" class="generate-code-button">Generate Code</button>
                </div>
                
                <div id="codeOutputContainer" class="code-output-container" style="display: none;">
                    <div class="code-title">Your Custom iTabs Code</div>
                    <div class="code-area">
                        <pre id="codeDisplay" class="code-display"></pre>
                        <button id="copyCodeBtn" class="copy-code-btn">Copy Code</button>
                    </div>
                    <div class="installation-guide">
                        <h3>How to Use This Code</h3>
                        <p>Copy and paste this code into your website's HTML. Place it where you want the iTabs to appear.</p>
                        <p>This is a self-contained code snippet with all the necessary HTML, CSS, and JavaScript bundled together.</p>
                    </div>
                </div>
            </section>
            
            <section class="preview-section">
                <h2>Live Preview</h2>
                <div class="preview-container">
                    <div class="trigger-icon" id="triggerIconPreview">i</div>
                    <div class="itabs-container">
                        <div class="itabs-tabs">
                            <button class="itab active" data-tab="tab1">What are iTabs?</button>
                            <button class="itab" data-tab="tab2">Benefits</button>
                        </div>
                        
                        <div id="tab1" class="itab-content active">
                            <p>iTabs are interactive information displays that enhance your content with contextual explanations. They help readers understand complex information without leaving the page or disrupting their reading flow.</p>
                            <img src="https://via.placeholder.com/600x300" alt="Tab image" class="tab-image">
                        </div>
                        
                        <div id="tab2" class="itab-content">
                            <p>• Immediate clarification of unfamiliar terms<br>
                            • Maintains reading context and flow<br>
                            • Reduces cognitive load of switching between pages<br>
                            • Improves overall comprehension<br>
                            • Enhances user engagement with your content</p>
                            <img src="https://via.placeholder.com/600x300/6366f1/ffffff?text=Benefits+of+iTabs" alt="Tab image" class="tab-image">
                        </div>
                        
                        <div class="itab-buttons">
                            <a href="#" class="itabs-link-button">Learn More</a>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            let tabCount = 2;
            const maxTabs = 5; // Increased from 3 to 5
            let primaryColor = '#6366f1';
            
            // Elements
            const tabInputs = document.getElementById('tabInputs');
            const addTabBtn = document.getElementById('addTabBtn');
            const tab1Title = document.getElementById('tab1Title');
            const tab1Content = document.getElementById('tab1Content');
            const tab1Image = document.getElementById('tab1Image');
            const tab2Title = document.getElementById('tab2Title');
            const tab2Content = document.getElementById('tab2Content');
            const tab2Image = document.getElementById('tab2Image');
            const buttonText = document.getElementById('buttonText');
            const buttonUrl = document.getElementById('buttonUrl');
            const colorOptions = document.querySelectorAll('.color-option');
            const borderStyle = document.getElementById('borderStyle');
            const borderWidth = document.getElementById('borderWidth');
            const triggerIcon = document.getElementById('triggerIcon');
            const triggerIconPreview = document.getElementById('triggerIconPreview');
            const updatePreviewBtn = document.getElementById('updatePreviewBtn');
            const updateImagesBtn = document.getElementById('updateImagesBtn');
            const generateCodeBtn = document.getElementById('generateCodeBtn');
            const codeOutputContainer = document.getElementById('codeOutputContainer');
            const codeDisplay = document.getElementById('codeDisplay');
            const copyCodeBtn = document.getElementById('copyCodeBtn');
            
            // Preview elements
            const itabsTabs = document.querySelector('.itabs-tabs');
            const itabsLinkButton = document.querySelector('.itabs-link-button');
            
            // Add tab button functionality
            addTabBtn.addEventListener('click', function() {
                if (tabCount >= maxTabs) {
                    alert('Maximum of 5 tabs allowed in this demo.');
                    return;
                }
                
                tabCount++;
                
                // Create new tab input fields
                const newTabInput = document.createElement('div');
                newTabInput.className = 'tab-input';
                newTabInput.innerHTML = `
                    <div class="input-group">
                        <label for="tab${tabCount}Title">Tab ${tabCount} Title</label>
                        <input type="text" id="tab${tabCount}Title" value="Implementation" placeholder="Enter tab title...">
                    </div>
                    <div class="input-group">
                        <label for="tab${tabCount}Content">Tab ${tabCount} Content</label>
                        <textarea id="tab${tabCount}Content" placeholder="Enter tab content...">Adding iTabs to your site is simple! Just use our generator to create your tabs, then copy and paste the provided code into your website.</textarea>
                    </div>
                    <div class="input-group">
                        <label for="tab${tabCount}Image">Tab ${tabCount} Image URL (optional)</label>
                        <input type="url" id="tab${tabCount}Image" placeholder="Enter image URL..." value="https://via.placeholder.com/600x300/10b981/ffffff?text=Implementation+Guide">
                    </div>
                `;
                
                tabInputs.appendChild(newTabInput);
                
                // Add new tab to preview
                const newTab = document.createElement('button');
                newTab.className = 'itab';
                newTab.setAttribute('data-tab', `tab${tabCount}`);
                newTab.textContent = 'Implementation';
                itabsTabs.appendChild(newTab);
                
                // Add new content div
                const newContent = document.createElement('div');
                newContent.id = `tab${tabCount}`;
                newContent.className = 'itab-content';
                newContent.innerHTML = `
                    <p>Adding iTabs to your site is simple! Just use our generator to create your tabs, then copy and paste the provided code into your website.</p>
                    <img src="https://via.placeholder.com/600x300/10b981/ffffff?text=Implementation+Guide" alt="Tab image" class="tab-image">
                `;
                document.querySelector('.itab-buttons').insertAdjacentElement('beforebegin', newContent);
                
                // Add event listeners for new tab
                const newTabTitle = document.getElementById(`tab${tabCount}Title`);
                const newTabContent = document.getElementById(`tab${tabCount}Content`);
                const newTabImage = document.getElementById(`tab${tabCount}Image`);
                
                newTabTitle.addEventListener('input', updatePreview);
                newTabContent.addEventListener('input', updatePreview);
                newTabImage.addEventListener('input', updatePreview);
                newTabImage.addEventListener('change', function() {
                    updateTabContent(`tab${tabCount}`, newTabContent.value, newTabImage.value);
                });
                
                // Add click event for new tab in preview
                newTab.addEventListener('click', function() {
                    activateTab(this.getAttribute('data-tab'));
                });
                
                // If this is the max number of tabs, disable the add button
                if (tabCount >= maxTabs) {
                    addTabBtn.disabled = true;
                    addTabBtn.style.opacity = '0.5';
                }
                
                updatePreview();
            });
            
            // Tab switching in preview
            document.querySelectorAll('.itab').forEach(tab => {
                tab.addEventListener('click', function() {
                    activateTab(this.getAttribute('data-tab'));
                });
            });
            
            // Color picker
            colorOptions.forEach(option => {
                option.addEventListener('click', function() {
                    colorOptions.forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    primaryColor = this.getAttribute('data-color');
                    updateColors();
                });
            });
            
            // Input event listeners for real-time preview updates
            tab1Title.addEventListener('input', updatePreview);
            tab1Content.addEventListener('input', updatePreview);
            tab1Image.addEventListener('input', updatePreview);
            tab1Image.addEventListener('change', function() {
                updateTabContent('tab1', tab1Content.value, tab1Image.value);
            });
            tab2Title.addEventListener('input', updatePreview);
            tab2Content.addEventListener('input', updatePreview);
            tab2Image.addEventListener('input', updatePreview);
            tab2Image.addEventListener('change', function() {
                updateTabContent('tab2', tab2Content.value, tab2Image.value);
            });
            buttonText.addEventListener('input', updatePreview);
            buttonUrl.addEventListener('input', updatePreview);
            borderStyle.addEventListener('change', updateBorders);
            borderWidth.addEventListener('change', updateBorders);
            
            // Input event listeners for real-time preview updates
            triggerIcon.addEventListener('input', updateTriggerIcon);
            updatePreviewBtn.addEventListener('click', function(e) {
                e.preventDefault();
                updatePreview();
                updateBorders();
                updateColors();
                
                // Show a temporary success message
                const btn = this;
                const originalText = btn.textContent;
                btn.textContent = "✓ Preview Updated!";
                btn.style.backgroundColor = "#10b981";
                
                setTimeout(function() {
                    btn.textContent = originalText;
                    btn.style.backgroundColor = "";
                }, 1500);
            });
            
            updateImagesBtn.addEventListener('click', function(e) {
                e.preventDefault();
                updateImages();
                
                // Show a temporary success message
                const btn = this;
                const originalText = btn.textContent;
                btn.textContent = "✓ Images Updated!";
                btn.style.backgroundColor = "#10b981";
                
                setTimeout(function() {
                    btn.textContent = originalText;
                    btn.style.backgroundColor = "";
                }, 1500);
            });
            
            // Generate Code button functionality
            generateCodeBtn.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Generate the code
                const generatedCode = generateCode();
                
                // Display the code
                codeDisplay.textContent = generatedCode;
                codeOutputContainer.style.display = 'block';
                
                // Scroll to code output
                codeOutputContainer.scrollIntoView({ behavior: 'smooth' });
                
                // Show a temporary success message
                const btn = this;
                const originalText = btn.textContent;
                btn.textContent = "✓ Code Generated!";
                btn.style.backgroundColor = "#10b981";
                
                setTimeout(function() {
                    btn.textContent = originalText;
                    btn.style.backgroundColor = "";
                }, 1500);
            });
            
            // Copy Code button functionality
            copyCodeBtn.addEventListener('click', function() {
                // Create a temporary textarea to copy from
                const tempTextArea = document.createElement('textarea');
                tempTextArea.value = codeDisplay.textContent;
                document.body.appendChild(tempTextArea);
                
                // Select and copy the code
                tempTextArea.select();
                document.execCommand('copy');
                
                // Remove the temporary textarea
                document.body.removeChild(tempTextArea);
                
                // Show a temporary success message
                const btn = this;
                const originalText = btn.textContent;
                btn.textContent = "✓ Copied!";
                
                setTimeout(function() {
                    btn.textContent = originalText;
                }, 1500);
            });
            
            // Function to activate a tab in the preview
            function activateTab(tabId) {
                // Deactivate all tabs
                document.querySelectorAll('.itab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.itab-content').forEach(c => c.classList.remove('active'));
                
                // Activate the selected tab
                document.querySelector(`.itab[data-tab="${tabId}"]`).classList.add('active');
                document.getElementById(tabId).classList.add('active');
            }
            
            // Function to update colors
            function updateColors() {
                document.querySelectorAll('.itab.active').forEach(tab => {
                    tab.style.color = primaryColor;
                    tab.style.borderBottomColor = primaryColor;
                });
                
                document.querySelectorAll('.itab').forEach(tab => {
                    tab.addEventListener('mouseenter', function() {
                        if (!this.classList.contains('active')) {
                            this.style.color = primaryColor;
                        }
                    });
                    
                    tab.addEventListener('mouseleave', function() {
                        if (!this.classList.contains('active')) {
                            this.style.color = '#64748b';
                        }
                    });
                });
                
                itabsLinkButton.style.backgroundColor = primaryColor;
                triggerIconPreview.style.backgroundColor = primaryColor;
                document.querySelector('.preview-container').style.borderColor = primaryColor;
                
                // Update CSS variables
                document.documentElement.style.setProperty('--primary-color', primaryColor);
                
                // Calculate a darker shade for hover effects
                const darkerColor = adjustColor(primaryColor, -20);
                document.documentElement.style.setProperty('--primary-dark', darkerColor);
            }
            
            // Function to update the trigger icon
            function updateTriggerIcon() {
                triggerIconPreview.textContent = triggerIcon.value || 'i';
            }
            
            // Function to update all images
            function updateImages() {
                // Get all current image URLs
                const tab1ImageValue = document.getElementById('tab1Image').value;
                const tab2ImageValue = document.getElementById('tab2Image').value;
                
                // Update the tab contents with images
                document.getElementById('tab1').querySelector('p').insertAdjacentHTML('afterend', 
                    `<img src="${tab1ImageValue}" alt="Tab image" class="tab-image">`);
                
                document.getElementById('tab2').querySelector('p').insertAdjacentHTML('afterend', 
                    `<img src="${tab2ImageValue}" alt="Tab image" class="tab-image">`);
                
                // Update any additional tabs
                for (let i = 3; i <= tabCount; i++) {
                    if (document.getElementById(`tab${i}`)) {
                        const tabImageValue = document.getElementById(`tab${i}Image`).value;
                        if (tabImageValue) {
                            document.getElementById(`tab${i}`).querySelector('p').insertAdjacentHTML('afterend', 
                                `<img src="${tabImageValue}" alt="Tab image" class="tab-image">`);
                        }
                    }
                }
            }
            
            // Function to update borders
            function updateBorders() {
                const style = borderStyle.value;
                const width = borderWidth.value;
                const previewContainer = document.querySelector('.preview-container');
                
                previewContainer.style.borderStyle = style;
                previewContainer.style.borderWidth = width;
            }
            
            // Helper function to update tab content including images
            function updateTabContent(tabId, content, imageUrl) {
                const tabElement = document.getElementById(tabId);
                if (!tabElement) return;
                
                // Clear existing content
                tabElement.innerHTML = '';
                
                // Add the text content
                const textElement = document.createElement('p');
                textElement.innerHTML = content.replace(/\n/g, '<br>');
                tabElement.appendChild(textElement);
                
                // Add image if URL is provided
                if (imageUrl && imageUrl.trim() !== '') {
                    const imageElement = document.createElement('img');
                    imageElement.src = imageUrl;
                    imageElement.alt = "Tab image";
                    imageElement.className = "tab-image";
                    tabElement.appendChild(imageElement);
                }
            }
            
            // Function to update the preview
            function updatePreview() {
                // Get current values from all fields
                const tab1TitleValue = tab1Title.value;
                const tab1ContentValue = tab1Content.value;
                const tab1ImageValue = tab1Image.value;
                
                const tab2TitleValue = tab2Title.value;
                const tab2ContentValue = tab2Content.value;
                const tab2ImageValue = tab2Image.value;
                
                // Update tab titles
                const tabButtons = document.querySelectorAll('.itab');
                tabButtons[0].textContent = tab1TitleValue;
                tabButtons[1].textContent = tab2TitleValue;
                
                for (let i = 3; i <= tabCount; i++) {
                    const tabTitleField = document.getElementById(`tab${i}Title`);
                    if (tabTitleField && tabButtons[i-1]) {
                        tabButtons[i-1].textContent = tabTitleField.value;
                    }
                }
                
                // Update tab contents
                updateTabContent('tab1', tab1ContentValue, tab1ImageValue);
                updateTabContent('tab2', tab2ContentValue, tab2ImageValue);
                
                for (let i = 3; i <= tabCount; i++) {
                    const contentField = document.getElementById(`tab${i}Content`);
                    const imageField = document.getElementById(`tab${i}Image`);
                    
                    if (contentField && imageField) {
                        updateTabContent(`tab${i}`, contentField.value, imageField.value);
                    }
                }
                
                // Update button
                itabsLinkButton.textContent = buttonText.value;
                itabsLinkButton.href = buttonUrl.value;
                
                // Show/hide button based on whether text is provided
                itabsLinkButton.style.display = buttonText.value.trim() ? 'inline-block' : 'none';
            }
            
            // Function to adjust color brightness
            function generateCode() {
                // Get all the current tab data
                const tabs = [];
                
                // Add the first two tabs
                tabs.push({
                    title: tab1Title.value,
                    content: tab1Content.value,
                    image: tab1Image.value
                });
                
                tabs.push({
                    title: tab2Title.value,
                    content: tab2Content.value,
                    image: tab2Image.value
                });
                
                // Add any additional tabs
                for (let i = 3; i <= tabCount; i++) {
                    const tabTitleField = document.getElementById(`tab${i}Title`);
                    const tabContentField = document.getElementById(`tab${i}Content`);
                    const tabImageField = document.getElementById(`tab${i}Image`);
                    
                    if (tabTitleField && tabContentField) {
                        tabs.push({
                            title: tabTitleField.value,
                            content: tabContentField.value,
                            image: tabImageField ? tabImageField.value : ''
                        });
                    }
                }
                
                // Get button data
                const buttonData = {
                    text: buttonText.value,
                    url: buttonUrl.value
                };
                
                // Get style preferences
                const iconText = triggerIcon.value;
                const primaryColorValue = primaryColor;
                const borderStyleValue = borderStyle.value;
                const borderWidthValue = borderWidth.value;
                
                // Generate HTML structure
                let html = `<!-- iTabs - Start -->
<div class="itabs-container" id="itabs-container-${Date.now().toString(36)}">
    <div class="itabs-trigger">
        <span class="itabs-trigger-icon">${iconText}</span>
    </div>
    <div class="itabs-content">
        <div class="itabs-tabs">
`;

                // Add tab buttons
                tabs.forEach((tab, index) => {
                    html += `            <button class="itabs-tab${index === 0 ? ' active' : ''}" data-tab="tab-${index + 1}">${tab.title}</button>\n`;
                });

                html += `        </div>
        
`;

                // Add tab content
                tabs.forEach((tab, index) => {
                    html += `        <div class="itabs-tab-content${index === 0 ? ' active' : ''}" id="tab-${index + 1}">
            <div class="itabs-tab-text">${tab.content.replace(/\n/g, '<br>')}</div>
${tab.image ? `            <img src="${tab.image}" alt="${tab.title}" class="itabs-tab-image">` : ''}
        </div>
        
`;
                });

                // Add button if provided
                if (buttonData.text.trim()) {
                    html += `        <div class="itabs-button-container">
            <a href="${buttonData.url}" class="itabs-button" target="_blank">${buttonData.text}</a>
        </div>
`;
                }

                html += `    </div>
</div>

<style>
    /* iTabs Styles */
    .itabs-container {
        position: relative;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        max-width: 100%;
        margin: 20px 0;
        border: ${borderWidthValue} ${borderStyleValue} ${primaryColorValue};
        border-radius: 8px;
        overflow: hidden;
    }
    
    .itabs-trigger {
        position: absolute;
        top: 10px;
        right: 10px;
        z-index: 10;
    }
    
    .itabs-trigger-icon {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 30px;
        height: 30px;
        background-color: ${primaryColorValue};
        color: white;
        border-radius: 50%;
        font-weight: bold;
        cursor: pointer;
        font-style: italic;
    }
    
    .itabs-content {
        background: white;
    }
    
    .itabs-tabs {
        display: flex;
        background-color: #f1f5f9;
        border-bottom: 1px solid #e2e8f0;
    }
    
    .itabs-tab {
        padding: 15px;
        background: none;
        border: none;
        border-bottom: 3px solid transparent;
        font-weight: 600;
        color: #64748b;
        cursor: pointer;
        transition: all 0.3s;
    }
    
    .itabs-tab:hover {
        color: ${primaryColorValue};
    }
    
    .itabs-tab.active {
        color: ${primaryColorValue};
        background: white;
        border-bottom: 3px solid ${primaryColorValue};
    }
    
    .itabs-tab-content {
        display: none;
        padding: 20px;
        animation: itabs-fadeIn 0.5s;
    }
    
    .itabs-tab-content.active {
        display: block;
    }
    
    .itabs-tab-image {
        max-width: 100%;
        height: auto;
        margin: 15px 0;
        border-radius: 4px;
    }
    
    .itabs-button-container {
        padding: 0 20px 20px;
    }
    
    .itabs-button {
        display: inline-block;
        padding: 8px 16px;
        background: ${primaryColorValue};
        color: white;
        text-decoration: none;
        border-radius: 4px;
        font-weight: 600;
    }
    
    @keyframes itabs-fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
        .itabs-tabs {
            flex-wrap: wrap;
        }
        
        .itabs-tab {
            flex-grow: 1;
            text-align: center;
            padding: 10px;
        }
    }
</style>

<script>
    (function() {
        // Get the container and all tabs
        const container = document.getElementById('itabs-container-${Date.now().toString(36)}');
        const tabs = container.querySelectorAll('.itabs-tab');
        
        // Add click event to each tab
        tabs.forEach(tab => {
            tab.addEventListener('click', function() {
                // Get the tab ID
                const tabId = this.getAttribute('data-tab');
                
                // Remove active class from all tabs and tab contents
                tabs.forEach(t => t.classList.remove('active'));
                const tabContents = container.querySelectorAll('.itabs-tab-content');
                tabContents.forEach(c => c.classList.remove('active'));
                
                // Add active class to current tab and tab content
                this.classList.add('active');
                container.querySelector('#' + tabId).classList.add('active');
            });
        });
    })();
</script>
<!-- iTabs - End -->`;

                return html;
            }
            function adjustColor(color, amount) {
                return '#' + color.replace(/^#/, '').replace(/../g, color => ('0' + Math.min(255, Math.max(0, parseInt(color, 16) + amount)).toString(16)).substr(-2));
            }
            
            // Initialize colors, borders, and trigger icon
            updateColors();
            updateBorders();
            updateTriggerIcon();
        });
    </script>
</body>
</html>
<br>
<br>
<!-- ROTATING EMOJI WELL WIDGET - RIGHT SIDE FLOATING -->
<!-- Copy and paste this entire code into your website -->

<div class="well-widget">
    <div class="well-button-container">
        <button class="well-emoji-button" id="wellEmojiButton">
            <div class="well-emoji-circle">
                <!-- Rotating emojis will appear here -->
                <span class="well-rotating-emoji active" id="emoji1">👨‍🌾</span>
                <span class="well-rotating-emoji" id="emoji2">💧</span>
                <span class="well-rotating-emoji" id="emoji3">🌱</span>
                <span class="well-rotating-emoji" id="emoji4">🚜</span>
                <span class="well-rotating-emoji" id="emoji5">🙏</span>
                <span class="well-rotating-emoji" id="emoji6">😊</span>
            </div>
            <!-- i indicator now outside the overflow:hidden container -->
        </button>
        <!-- i indicator moved here so it's not affected by overflow:hidden -->
        <div class="well-i-indicator">i</div>
        
        <div class="well-popup" id="wellPopup">
            <div class="well-popup-header">
                <h3 class="well-popup-title">Help Our Farmers 👨‍🌾</h3>
                <p class="well-popup-subtitle">Support the well project</p>
                <button class="well-close-popup" id="wellClosePopup">&times;</button>
            </div>
            
            <div class="well-options">
                <div class="well-option" id="fiveOption" onclick="WellWidget.selectOption('five')">
                    <div class="well-option-icon">💧</div>
                    <div class="well-option-content">
                        <h4>Quick $5 Donation</h4>
                        <p>Help bring water to Agape farming community</p>
                    </div>
                    <div class="well-check"></div>
                </div>
                
                <div class="well-option" id="inchOption" onclick="WellWidget.selectOption('inch')">
                    <div class="well-option-icon">📏</div>
                    <div class="well-option-content">
                        <h4>Sponsor 1 Inch ($13)</h4>
                        <p>Help dig one inch of our community well</p>
                    </div>
                    <div class="well-check"></div>
                </div>
                
                <div class="well-option" id="customOption" onclick="WellWidget.selectOption('custom')">
                    <div class="well-option-icon">🌱</div>
                    <div class="well-option-content">
                        <h4>Custom Amount</h4>
                        <p>Choose your own donation amount</p>
                    </div>
                    <div class="well-check"></div>
                </div>
            </div>
            
            <div class="well-custom-input" id="customAmountContainer">
                <label for="customAmount">Enter amount:</label>
                <div class="well-input-container">
                    <span class="well-currency">$</span>
                    <input type="number" id="customAmount" min="1" placeholder="Amount" value="10">
                </div>
            </div>
            
            <div class="well-progress">
                <div class="well-progress-bar">
                    <div class="well-progress-fill" id="wellProgressFill"></div>
                </div>
                <div class="well-progress-text">
                    <span id="wellProgressText">0%</span> of our $10,000 goal
                </div>
            </div>
            
            <button class="well-donate-button" id="wellDonateButton">
                Donate Now
            </button>
            
            <div class="well-footer">
                <button class="well-info-button" id="wellInfoButton">
                    Learn how this helps farmers 👨‍🌾
                </button>
            </div>
        </div>
        
        <div class="well-info-popup" id="wellInfoPopup">
            <div class="well-popup-header">
                <h3 class="well-popup-title">Supporting Farmers 👨‍🌾</h3>
                <button class="well-close-popup" id="wellInfoCloseButton">&times;</button>
            </div>
            
            <div class="well-info-content">
                <p>Your donation helps dig a well at the Agape land to support local farmers during drought seasons. With water available 65 feet underground, this well will transform agriculture in the community. 🌱</p>
                
                <div class="well-farmer-impact">
                    <h4>How This Helps Farmers:</h4>
                    <ul>
                        <li>🌞 Reliable water during dry seasons</li>
                        <li>🥕 Year-round vegetable production</li>
                        <li>📚 Enhanced agricultural training</li>
                        <li>🍽️ Improved food security</li>
                        <li>🌍 Sustainable farming practices</li>
                    </ul>
                </div>
                
                <div class="well-info-stats">
                    <div class="well-stat">
                        <div class="well-stat-number" id="wellDonorsCount">24</div>
                        <div class="well-stat-label">Donors</div>
                    </div>
                    <div class="well-stat">
                        <div class="well-stat-number" id="wellRaisedAmount">$3,125</div>
                        <div class="well-stat-label">Raised</div>
                    </div>
                    <div class="well-stat">
                        <div class="well-stat-number" id="wellInchesCount">240</div>
                        <div class="well-stat-label">Inches</div>
                    </div>
                </div>
                
                <div class="well-farmer-quote">
                    <img src="data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='50' height='50' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='45' fill='%23f6f6f6'/%3E%3Cpath d='M50 10c-22 0-40 18-40 40s18 40 40 40 40-18 40-40-18-40-40-40zm0 75c-19.3 0-35-15.7-35-35s15.7-35 35-35 35 15.7 35 35-15.7 35-35 35z' fill='%23ddd'/%3E%3Cpath d='M35 40c0-8.3 6.7-15 15-15s15 6.7 15 15c0 8.3-6.7 15-15 15s-15-6.7-15-15zM70 75H30c0-11 9-20 20-20s20 9 20 20z' fill='%23ddd'/%3E%3C/svg%3E" class="well-farmer-icon" alt="Farmer">
                    <p>"Water is the foundation of everything we do. This well will allow us to grow crops all year and teach the next generation of farmers."</p>
                </div>
                
                <button class="well-donate-button" onclick="WellWidget.backToOptions()">
                    Support Our Farmers
                </button>
            </div>
        </div>
    </div>
</div>

<div class="well-toast" id="wellToast"></div>

<style>
    /* Widget Styling - Self-contained to avoid conflicts */
    .well-widget {
        --well-primary: #0074d9;
        --well-primary-light: #4192e9;
        --well-primary-dark: #0062b3;
        --well-text: #333;
        --well-text-light: #666;
        --well-bg: #fff;
        --well-bg-light: #f5f7fa;
        --well-success: #28a745;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        font-size: 16px;
        line-height: 1.5;
        color: var(--well-text);
        box-sizing: border-box;
    }

    .well-widget *,
    .well-widget *:before,
    .well-widget *:after {
        box-sizing: inherit;
    }

    /* Button Container - Fixed on RIGHT side */
    .well-button-container {
        position: fixed;
        top: 50%;
        right: 20px; /* Position on RIGHT side */
        transform: translateY(-50%);
        z-index: 9998;
    }

    /* Main Emoji Button */
    .well-emoji-button {
        background: var(--well-bg);
        border: none;
        border-radius: 50%;
        width: 60px;
        height: 60px;
        cursor: pointer;
        box-shadow: 0 3px 8px rgba(0,0,0,0.15);
        position: relative;
        transition: transform 0.2s, box-shadow 0.2s;
        padding: 0;
        overflow: hidden; /* Hide overflowing emoji parts */
    }

    .well-emoji-button:hover {
        transform: translateX(-2px); /* Move left instead of right when on right side */
        box-shadow: 0 5px 12px rgba(0,0,0,0.2);
    }

    /* Emoji Circle Container */
    .well-emoji-circle {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
    }

    /* Rotating Emojis */
    .well-rotating-emoji {
        position: absolute;
        font-size: 28px;
        opacity: 0;
        transition: opacity 0.5s ease;
        transform: scale(0.5);
        animation: scaleUp 0.5s forwards;
    }

    .well-rotating-emoji.active {
        opacity: 1;
    }

    @keyframes scaleUp {
        from { transform: scale(0.5); }
        to { transform: scale(1); }
    }

    /* 'i' Indicator - Positioned relative to button container, not the button itself */
    .well-i-indicator {
        position: absolute;
        top: -5px;
        right: -5px;
        background: var(--well-primary);
        color: white;
        width: 24px;
        height: 24px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 16px;
        font-style: italic;
        font-weight: 600;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        z-index: 2;
    }

    /* Popup Dialog - Positioned to the LEFT of the button when on right side */
    .well-popup, .well-info-popup {
        position: absolute;
        top: 50%;
        right: 75px; /* Position to the left of the button */
        transform: translateY(-50%);
        background: var(--well-bg);
        width: 320px;
        border-radius: 12px;
        box-shadow: 0 5px 25px rgba(0,0,0,0.25);
        z-index: 9999;
        display: none;
        overflow: hidden;
    }

    /* Arrow pointing to button - pointing right instead of left */
    .well-popup:before, .well-info-popup:before {
        content: '';
        position: absolute;
        top: 50%;
        right: -10px; /* Position on right side */
        transform: translateY(-50%);
        width: 0;
        height: 0;
        border-top: 10px solid transparent;
        border-bottom: 10px solid transparent;
        border-left: 10px solid white; /* Border on left instead of right */
        border-right: none; /* Remove right border */
        z-index: 1;
    }

    .well-popup.active, .well-info-popup.active {
        display: block;
        animation: wellFadeIn 0.25s ease-out;
    }

    @keyframes wellFadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    /* Popup Header */
    .well-popup-header {
        background: var(--well-primary);
        color: white;
        padding: 15px;
        position: relative;
    }

    .well-popup-title {
        font-size: 18px;
        font-weight: 600;
        margin: 0;
    }

    .well-popup-subtitle {
        font-size: 14px;
        opacity: 0.9;
        margin-top: 5px;
    }

    .well-close-popup {
        position: absolute;
        top: 12px;
        right: 12px;
        background: none;
        border: none;
        color: white;
        font-size: 20px;
        cursor: pointer;
        opacity: 0.8;
        transition: opacity 0.2s;
    }

    .well-close-popup:hover {
        opacity: 1;
    }

    /* Options */
    .well-options {
        padding: 15px;
    }

    .well-option {
        display: flex;
        align-items: center;
        padding: 12px;
        background: var(--well-bg-light);
        border-radius: 8px;
        margin-bottom: 10px;
        cursor: pointer;
        transition: all 0.2s;
        border: 2px solid transparent;
    }

    .well-option:hover {
        background: #edf5ff;
    }

    .well-option.selected {
        border-color: var(--well-primary);
        background: #edf5ff;
    }

    .well-option-icon {
        font-size: 24px;
        margin-right: 12px;
        flex-shrink: 0;
    }

    .well-option-content {
        flex-grow: 1;
    }

    .well-option-content h4 {
        margin: 0 0 5px 0;
        font-size: 16px;
    }

    .well-option-content p {
        margin: 0;
        font-size: 12px;
        color: var(--well-text-light);
    }

    .well-check {
        width: 20px;
        height: 20px;
        border-radius: 50%;
        border: 2px solid #ddd;
        margin-left: 10px;
        flex-shrink: 0;
        position: relative;
    }

    .well-option.selected .well-check {
        border-color: var(--well-primary);
        background: var(--well-primary);
    }

    .well-option.selected .well-check:after {
        content: '';
        position: absolute;
        top: 3px;
        left: 6px;
        width: 5px;
        height: 10px;
        border: solid white;
        border-width: 0 2px 2px 0;
        transform: rotate(45deg);
    }

    /* Custom Amount Input */
    .well-custom-input {
        padding: 0 15px 15px;
        display: none;
    }

    .well-custom-input.active {
        display: block;
        animation: wellFadeIn 0.3s;
    }

    .well-custom-input label {
        display: block;
        margin-bottom: 8px;
        font-size: 14px;
        font-weight: 500;
    }

    .well-input-container {
        position: relative;
    }

    .well-currency {
        position: absolute;
        top: 50%;
        left: 12px;
        transform: translateY(-50%);
        font-weight: 500;
    }

    .well-custom-input input {
        width: 100%;
        padding: 10px 10px 10px 25px;
        border: 1px solid #ddd;
        border-radius: 6px;
        font-size: 16px;
    }

    .well-custom-input input:focus {
        outline: none;
        border-color: var(--well-primary);
    }

    /* Progress Bar */
    .well-progress {
        padding: 0 15px 15px;
    }

    .well-progress-bar {
        height: 10px;
        background: #e9ecef;
        border-radius: 5px;
        overflow: hidden;
        margin-bottom: 8px;
    }

    .well-progress-fill {
        height: 100%;
        background: var(--well-primary);
        width: 31.25%;
        transition: width 1s ease;
    }

    .well-progress-text {
        font-size: 12px;
        color: var(--well-text-light);
        text-align: right;
    }

    /* Donate Button */
    .well-donate-button {
        display: block;
        width: calc(100% - 30px);
        margin: 0 15px 15px;
        padding: 12px;
        background: var(--well-primary);
        color: white;
        border: none;
        border-radius: 6px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: background 0.2s;
    }

    .well-donate-button:hover {
        background: var(--well-primary-dark);
    }

    /* Footer */
    .well-footer {
        padding: 0 15px 15px;
        text-align: center;
    }

    .well-info-button {
        background: none;
        border: none;
        color: var(--well-primary);
        font-size: 14px;
        cursor: pointer;
        transition: color 0.2s;
        text-decoration: underline;
        padding: 0;
    }

    .well-info-button:hover {
        color: var(--well-primary-dark);
    }

    /* Info Popup */
    .well-info-content {
        padding: 15px;
        font-size: 14px;
    }

    .well-info-content p {
        margin-bottom: 15px;
    }

    .well-farmer-impact {
        background: #f9f9f9;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 15px;
    }

    .well-farmer-impact h4 {
        margin-top: 0;
        margin-bottom: 10px;
        font-size: 16px;
    }

    .well-farmer-impact ul {
        margin: 0;
        padding-left: 20px;
    }

    .well-farmer-impact li {
        margin-bottom: 8px;
    }

    .well-info-stats {
        display: flex;
        justify-content: space-between;
        margin: 20px 0;
        text-align: center;
    }

    .well-stat {
        flex: 1;
    }

    .well-stat-number {
        font-size: 20px;
        font-weight: 700;
        color: var(--well-primary);
    }

    .well-stat-label {
        font-size: 12px;
        color: var(--well-text-light);
    }

    .well-farmer-quote {
        display: flex;
        align-items: center;
        background: #f5f9ff;
        padding: 15px;
        border-radius: 8px;
        margin: 15px 0;
    }

    .well-farmer-icon {
        width: 40px;
        height: 40px;
        margin-right: 15px;
        flex-shrink: 0;
    }

    .well-farmer-quote p {
        margin: 0;
        font-style: italic;
        font-size: 13px;
        color: #555;
    }

    /* Toast notification */
    .well-toast {
        position: fixed;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(0, 0, 0, 0.8);
        color: white;
        padding: 12px 25px;
        border-radius: 50px;
        font-size: 14px;
        z-index: 10000;
        display: none;
    }

    .well-toast.active {
        display: block;
        animation: wellFadeInOut 3s forwards;
    }

    @keyframes wellFadeInOut {
        0% { opacity: 0; transform: translate(-50%, -10px); }
        15% { opacity: 1; transform: translate(-50%, 0); }
        85% { opacity: 1; transform: translate(-50%, 0); }
        100% { opacity: 0; transform: translate(-50%, -10px); }
    }

    /* Pulse animation for attention */
    @keyframes wellPulse {
        0% { box-shadow: 0 0 0 0 rgba(0, 116, 217, 0.4); }
        70% { box-shadow: 0 0 0 10px rgba(0, 116, 217, 0); }
        100% { box-shadow: 0 0 0 0 rgba(0, 116, 217, 0); }
    }

    /* Apply pulse animation to button */
    .well-emoji-button {
        animation: wellPulse 2s infinite;
    }

    /* Mobile adjustments */
    @media (max-width: 400px) {
        .well-popup, .well-info-popup {
            width: 280px;
        }
    }
</style>

<script>
    // Namespaced to avoid conflicts
    var WellWidget = (function() {
        // Configuration
        const config = {
            donateUrl: 'https://example.com/donate', // Replace with actual donation URL
            goalAmount: 10000,
            currentAmount: 3125, // Already raised amount ($)
            percentComplete: 31.25, // % of goal reached
            emojiRotationInterval: 2500 // Time between emoji changes in ms
        };
        
        // State
        let state = {
            selectedOption: null,
            customAmount: 10,
            currentEmojiIndex: 0
        };
        
        // Initialize
        function init() {
            // Get main elements
            const emojiButton = document.getElementById('wellEmojiButton');
            const optionsPopup = document.getElementById('wellPopup');
            const infoPopup = document.getElementById('wellInfoPopup');
            const closeOptionsButton = document.getElementById('wellClosePopup');
            const closeInfoButton = document.getElementById('wellInfoCloseButton');
            const donateButton = document.getElementById('wellDonateButton');
            const infoButton = document.getElementById('wellInfoButton');
            const customAmountInput = document.getElementById('customAmount');
            const customAmountContainer = document.getElementById('customAmountContainer');
            
            // Set progress bar
            document.getElementById('wellProgressFill').style.width = config.percentComplete + '%';
            document.getElementById('wellProgressText').textContent = config.percentComplete + '%';
            
            // Add event listeners
            emojiButton.addEventListener('click', () => {
                infoPopup.classList.remove('active');
                optionsPopup.classList.toggle('active');
            });
            
            closeOptionsButton.addEventListener('click', () => {
                optionsPopup.classList.remove('active');
            });
            
            closeInfoButton.addEventListener('click', () => {
                infoPopup.classList.remove('active');
            });
            
            infoButton.addEventListener('click', () => {
                optionsPopup.classList.remove('active');
                infoPopup.classList.add('active');
            });
            
            donateButton.addEventListener('click', processDonation);
            
            customAmountInput.addEventListener('input', () => {
                state.customAmount = parseFloat(customAmountInput.value) || 0;
                updateDonateButtonText();
            });
            
            // Close popups when clicking outside
            document.addEventListener('click', (event) => {
                if (!emojiButton.contains(event.target) && 
                    !document.querySelector('.well-i-indicator').contains(event.target) &&
                    !optionsPopup.contains(event.target) &&
                    !infoPopup.contains(event.target)) {
                    optionsPopup.classList.remove('active');
                    infoPopup.classList.remove('active');
                }
            });
            
            // Set default selection
            selectOption('five');
            
            // Start emoji rotation
            startEmojiRotation();
        }
        
        // Start rotating emojis inside the main button
        function startEmojiRotation() {
            const emojis = document.querySelectorAll('.well-rotating-emoji');
            
            // Set first emoji as active initially
            emojis[0].classList.add('active');
            
            // Rotate emojis at specified interval
            setInterval(() => {
                // Remove active class from current emoji
                emojis[state.currentEmojiIndex].classList.remove('active');
                
                // Update index
                state.currentEmojiIndex = (state.currentEmojiIndex + 1) % emojis.length;
                
                // Add active class to new emoji
                emojis[state.currentEmojiIndex].classList.add('active');
            }, config.emojiRotationInterval);
        }
        
        // Select donation option
        function selectOption(option) {
            // Update state
            state.selectedOption = option;
            
            // Update UI
            const options = document.querySelectorAll('.well-option');
            options.forEach(opt => opt.classList.remove('selected'));
            
            document.getElementById(option + 'Option').classList.add('selected');
            
            // Show/hide custom amount input
            const customAmountContainer = document.getElementById('customAmountContainer');
            if (option === 'custom') {
                customAmountContainer.classList.add('active');
            } else {
                customAmountContainer.classList.remove('active');
            }
            
            // Update button text
            updateDonateButtonText();
        }
        
        // Update donate button text based on selection
        function updateDonateButtonText() {
            const donateButton = document.getElementById('wellDonateButton');
            
            switch(state.selectedOption) {
                case 'five':
                    donateButton.textContent = 'Donate $5 Now';
                    break;
                case 'inch':
                    donateButton.textContent = 'Sponsor 1 Inch ($13)';
                    break;
                case 'custom':
                    donateButton.textContent = `Donate $${state.customAmount} Now`;
                    break;
                default:
                    donateButton.textContent = 'Donate Now';
            }
        }
        
        // Process donation
        function processDonation() {
            let amount = 0;
            let description = '';
            
            // Determine amount based on selection
            switch(state.selectedOption) {
                case 'five':
                    amount = 5;
                    description = 'Quick $5 Donation';
                    break;
                case 'inch':
                    amount = 13;
                    description = 'Sponsor 1 Inch';
                    break;
                case 'custom':
                    amount = state.customAmount;
                    description = 'Custom Donation';
                    break;
            }
            
            // Validate amount
            if (amount <= 0) {
                showToast('Please enter a valid amount');
                return;
            }
            
            // In a real implementation, this would redirect to your donation page
            // with the amount and description prefilled
            
            // Build donation URL with parameters
            const donateUrl = new URL(config.donateUrl);
            donateUrl.searchParams.append('amount', amount);
            donateUrl.searchParams.append('description', description);
            donateUrl.searchParams.append('source', 'emoji_widget');
            
            // Open donation page in new tab
            window.open(donateUrl.toString(), '_blank');
            
            // Show confirmation
            showToast(`Thank you for your $${amount} donation!`);
            
            // Close popup after a delay
            setTimeout(() => {
                document.getElementById('wellPopup').classList.remove('active');
            }, 2000);
        }
        
        // Switch from info back to options
        function backToOptions() {
            document.getElementById('wellInfoPopup').classList.remove('active');
            document.getElementById('wellPopup').classList.add('active');
        }
        
        // Show toast notification
        function showToast(message) {
            const toast = document.getElementById('wellToast');
            toast.textContent = message;
            toast.classList.add('active');
            
            setTimeout(() => {
                toast.classList.remove('active');
            }, 3000);
        }
        
        // Initialize on page load
        window.addEventListener('load', init);
        
        // Public API
        return {
            selectOption: selectOption,
            backToOptions: backToOptions
        };
    })();
</script>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Digging Deeper – A Well of Hope for Agape</title>
  <style>
    body {
      font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
      line-height: 1.6;
      color: #333;
      max-width: 700px;
      margin: 40px auto;
      padding: 0 20px;
    }
    h1 {
      color: #2c3e50;
    }
    p {
      margin-bottom: 20px;
    }
    ul {
      margin: 10px 0 20px 20px;
    }
    strong {
      color: #2c3e50;
    }
    .cta {
      font-size: 1.1em;
      font-weight: bold;
      background-color: #eaf6ff;
      padding: 15px;
      border-left: 4px solid #3498db;
      margin-top: 30px;
    }
  </style>
</head>
<body>

  <h1>Digging Deeper – A Well of Hope for Agape</h1>

  <p>In a quiet corner of the Agape land, the soil is dry but full of promise. Every season, students and staff from the local agricultural training college gather here—not just to grow crops, but to grow futures.</p>

  <p>Yet, one vital resource remains out of reach: <strong>water</strong>.</p>

  <p>Without a reliable well, farming is impossible during the dry season. Droughts steal the harvest, training is halted, and the community’s food supply hangs in the balance.</p>

  <p>But there’s hope—just <strong>65 feet below</strong> the surface.</p>

  <p>For <strong>$10,000</strong>, we can install a submersible pump and dig a well that transforms this land into a year-round source of growth. This well will:</p>
  <ul>
    <li>Shield crops and training programs from drought,</li>
    <li>Sustain staff and students through harvest,</li>
    <li>And empower farmers across villages through hands-on education.</li>
  </ul>

  <p>But water is only the beginning.</p>

  <p>We also need your help to cover:</p>
  <ul>
    <li><strong>Staff support</strong> – $700/month for a small team leading the project and mentoring future farmers,</li>
    <li><strong>Machinery upgrades</strong> – $2,000 to get a new planter operational,</li>
    <li><strong>Travel and accommodations</strong> – $4,000 per trip for essential visits during planting seasons.</li>
  </ul>

  <div class="cta">
    Each contribution doesn’t just build infrastructure—it builds <strong>independence</strong>, <strong>education</strong>, and <strong>resilience</strong>.
    <br><br>
    <strong>Partner with us. Be part of the harvest. Help us dig a well of hope.</strong>
  </div>

  <p>[Insert GifyLink or QR Code Here]</p>

    // Add this script at the end of your well widget HTML
<script>
    // Namespaced to avoid conflicts
    var WellWidget = (function() {
        // Configuration
        const config = {
            donateUrl: 'https://example.com/donate', // Replace with actual donation URL
            goalAmount: 10000,
            currentAmount: 3125, // Already raised amount ($)
            percentComplete: 31.25, // % of goal reached
            milestoneAmount: 4320, // Current milestone - 30 feet (360 inches) × $12/inch
            milestoneProgress: 2496, // Amount raised toward milestone
            emojiRotationInterval: 2500 // Time between emoji changes in ms
        };
        
        // State
        let state = {
            selectedOption: null,
            customAmount: 50,
            inches: 0,
            donorName: '',
            currentEmojiIndex: 0,
            isRecurring: false
        };
        
        // Initialize
        function init() {
            // Get main elements
            const emojiButton = document.getElementById('wellEmojiButton');
            const mainPopup = document.getElementById('wellPopup');
            const thankPopup = document.getElementById('wellThankPopup');
            const closeMainButton = document.getElementById('wellClosePopup');
            const closeThankButton = document.getElementById('wellThankCloseButton');
            const donateButton = document.getElementById('wellDonateButton');
            const recurringButton = document.getElementById('wellRecurringButton');
            const customAmountInput = document.getElementById('customAmount');
            const donorNameInput = document.getElementById('donorName');
            const tabButtons = document.querySelectorAll('.well-tab-button');
            
            // Set initial progress values
            updateWellProgress();
            updateMilestoneProgress();
            
            // Add event listeners
            emojiButton.addEventListener('click', () => {
                thankPopup.classList.remove('active');
                mainPopup.classList.toggle('active');
            });
            
            closeMainButton.addEventListener('click', () => {
                mainPopup.classList.remove('active');
            });
            
            closeThankButton.addEventListener('click', () => {
                thankPopup.classList.remove('active');
            });
            
            donateButton.addEventListener('click', processDonation);
            
            recurringButton.addEventListener('click', () => {
                state.isRecurring = !state.isRecurring;
                recurringButton.classList.toggle('active');
                
                if (state.isRecurring) {
                    recurringButton.textContent = "✓ Monthly Donation";
                } else {
                    recurringButton.textContent = "Make it Monthly";
                }
            });
            
            customAmountInput.addEventListener('input', () => {
                state.customAmount = parseFloat(customAmountInput.value) || 0;
                updateDonateButtonText();
            });
            
            donorNameInput.addEventListener('input', () => {
                state.donorName = donorNameInput.value.trim();
            });
            
            // Tab functionality
            tabButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    switchTab(tabId);
                });
            });
            
            // Close popups when clicking outside
            document.addEventListener('click', (event) => {
                if (!emojiButton.contains(event.target) && 
                    !document.querySelector('.well-i-indicator').contains(event.target) &&
                    !mainPopup.contains(event.target) &&
                    !thankPopup.contains(event.target)) {
                    mainPopup.classList.remove('active');
                    thankPopup.classList.remove('active');
                }
            });
            
            // Set default selection
            selectOption('inch12');
            
            // Start emoji rotation
            startEmojiRotation();
        }
        
        // Switch between tabs
        function switchTab(tabId) {
            // Update tab buttons
            document.querySelectorAll('.well-tab-button').forEach(btn => {
                btn.classList.toggle('active', btn.getAttribute('data-tab') === tabId);
            });
            
            // Update tab contents
            document.querySelectorAll('.well-tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(tabId + 'Tab').classList.add('active');
            
            // Track tab change
            trackEvent('tab_changed', { tab: tabId });
        }
        
        // Start rotating emojis
        function startEmojiRotation() {
            const emojis = document.querySelectorAll('.well-rotating-emoji');
            
            // Set first emoji as active initially
            emojis[0].classList.add('active');
            
            // Rotate emojis at specified interval
            setInterval(() => {
                // Remove active class from current emoji
                emojis[state.currentEmojiIndex].classList.remove('active');
                
                // Update index
                state.currentEmojiIndex = (state.currentEmojiIndex + 1) % emojis.length;
                
                // Add active class to new emoji
                emojis[state.currentEmojiIndex].classList.add('active');
            }, config.emojiRotationInterval);
        }
        
        // Select donation option
        function selectOption(option) {
            // Update state
            state.selectedOption = option;
            
            // Update inches based on option
            switch(option) {
                case 'inch1':
                    state.inches = 1;
                    break;
                case 'inch6':
                    state.inches = 6;
                    break;
                case 'inch12':
                    state.inches = 12;
                    break;
                case 'inch24':
                    state.inches = 24;
                    break;
                case 'custom':
                    // Calculate inches based on amount
                    state.inches = Math.floor(state.customAmount / 13);
                    break;
            }
            
            // Update UI
            const options = document.querySelectorAll('.well-option');
            options.forEach(opt => opt.classList.remove('selected'));
            
            const selectedOption = document.getElementById(option + 'Option');
            if (selectedOption) {
                selectedOption.classList.add('selected');
            }
            
            // Show/hide custom amount input
            const customAmountContainer = document.getElementById('customAmountContainer');
            if (option === 'custom') {
                customAmountContainer.classList.add('active');
            } else {
                customAmountContainer.classList.remove('active');
            }
            
            // Update button text
            updateDonateButtonText();
            
            // Track selection
            trackEvent('option_selected', { option: option, inches: state.inches });
        }
        
        // Update donate button text
        function updateDonateButtonText() {
            const donateButton = document.getElementById('wellDonateButton');
            
            if (state.selectedOption === 'custom') {
                state.inches = Math.floor(state.customAmount / 13);
                donateButton.textContent = `Sponsor ${state.inches} Inch${state.inches !== 1 ? 'es' : ''} ($${state.customAmount})`;
            } else {
                let amount = state.inches * 13;
                donateButton.textContent = `Sponsor ${state.inches} Inch${state.inches !== 1 ? 'es' : ''} ($${amount})`;
            }
        }
        
        // Update the well depth visualization
        function updateWellProgress() {
            const depthFilled = document.getElementById('wellDepthFilled');
            const depthLabel = document.getElementById('wellDepthLabel');
            const percentComplete = Math.min(100, config.percentComplete);
            
            if (depthFilled) {
                depthFilled.style.height = percentComplete + '%';
                depthLabel.textContent = Math.floor(percentComplete / 100 * 65) + ' ft';
            }
        }
        
        // Update the milestone progress bar
        function updateMilestoneProgress() {
            const progressFill = document.getElementById('milestoneProgressFill');
            const progressText = document.getElementById('milestoneProgressText');
            
            if (progressFill && progressText) {
                const percent = Math.min(100, Math.round((config.milestoneProgress / config.milestoneAmount) * 100));
                progressFill.style.width = percent + '%';
                progressText.textContent = percent + '%';
            }
        }
        
        // Process donation
        function processDonation() {
            // Validate
            if (state.inches <= 0) {
                showToast('Please select inches to sponsor');
                return;
            }
            
            const amount = state.selectedOption === 'custom' ? state.customAmount : (state.inches * 13);
            const donorName = state.donorName || 'Anonymous';
            
            // In a real implementation, this would redirect to your donation page
            // For demo, we'll show the thank you popup
            
            // Update certificate
            document.getElementById('wellCertificateName').textContent = donorName;
            document.getElementById('wellCertificateInches').textContent = `${state.inches} inch${state.inches !== 1 ? 'es' : ''}`;
            
            // Update thank you message
            const recurringText = state.isRecurring ? ' monthly' : '';
            document.getElementById('wellThankMessage').textContent = 
                `Thank you for your${recurringText} donation of $${amount} to sponsor ${state.inches} inch${state.inches !== 1 ? 'es' : ''} of the Agape Well Project. Your support will help bring sustainable water to farmers.`;
            
            // Show thank you popup
            document.getElementById('wellPopup').classList.remove('active');
            document.getElementById('wellThankPopup').classList.add('active');
            
            // Track donation
            trackEvent('donation_completed', { 
                amount: amount,
                inches: state.inches,
                recurring: state.isRecurring,
                donor_name: donorName
            });
            
            // In a real implementation, we would also redirect to payment
            // window.open(buildDonationUrl(), '_blank');
        }
        
        // Build donation URL with parameters
        function buildDonationUrl() {
            const amount = state.selectedOption === 'custom' ? state.customAmount : (state.inches * 13);
            const donateUrl = new URL(config.donateUrl);
            
            donateUrl.searchParams.append('amount', amount);
            donateUrl.searchParams.append('inches', state.inches);
            donateUrl.searchParams.append('recurring', state.isRecurring ? 'monthly' : 'one-time');
            if (state.donorName) {
                donateUrl.searchParams.append('name', state.donorName);
            }
            donateUrl.searchParams.append('source', 'well_widget');
            
            return donateUrl.toString();
        }
        
        // Show toast notification
        function showToast(message) {
            const toast = document.getElementById('wellToast');
            toast.textContent = message;
            toast.classList.add('active');
            
            setTimeout(() => {
                toast.classList.remove('active');
            }, 3000);
        }
        
        // Analytics tracking
        function trackEvent(action, data = {}) {
            // Here you would integrate with your analytics platform
            console.log('TRACK:', action, data);
            
            // Example Google Analytics integration
            if (typeof gtag !== 'undefined') {
                gtag('event', action, data);
            }
        }
        
        // Initialize on page load
        window.addEventListener('load', init);
        
        // Public API
        return {
            selectOption: selectOption,
            switchTab: switchTab
        };
    })();
</script>
</body>
</html>

